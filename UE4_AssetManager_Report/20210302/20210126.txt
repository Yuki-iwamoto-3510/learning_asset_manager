■今回は番外編という位置付けで、相当初歩的だが今後再発させないための自分への戒めとして、
　遭遇した現象について備忘録として残しておく


ここまでの実装状態でプレイモードの内「選択ビューポート」で実行すると、一度目は問題なく動作するが、
プレイ→停止→プレイを繰り返すと、画像のようにスクリプトから動的生成した武器・防具が倍々で増えていく。
なお、この間でUE4エディタを再起動すると一度リセットされる。

ここに画像

しかし、プレイモードの内「スタンドアローンゲーム」で実行すると、
同じ手順を何度繰り返しても上記現象は発生せず、正常に動作する。

UE4再起動でリセットされること、またスタンドアローンなら現象が発生しないことを考慮すると、
この時点では「プレイを停止した時に生成した武器・防具の削除が上手くできていないのが原因では」と思っていた。

しかし実際はUAssetManagerというUE4のアセットマネージャークラスが提供しているGetPrimaryAssetDataList()の使い方に問題があった。
このメソッドにFPrimaryAssetTypeとListを渡すと、そのFPrimaryAssetTypeが紐づいているロード済みアセットをListに格納してくれるのだが、
自分はこのメソッド内で渡したリストに丸ごと代入、もしくはコピーするような形で格納される物と思い込んでいた。
だがメソッド内部を確認してみると、ListにAddする形で格納が行われていた。
すなわち処理を繰り返す度にListの中身が膨らんでいったということになる。

事の真相だけで言えば大変初歩的ではあるが、「提供されている物がどういう仕組みかを十分理解してから使うべき」
というマインドを改めて学べた良い機会であった。